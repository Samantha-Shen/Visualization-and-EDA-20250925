---
title: "viz_i"
subtitle: "Part I"
output: html_document
date: "2025-09-25"
---

```{r setup}
library(tidyverse)
library(ggridges)
```


## Load the weather data

```{r}
library(p8105.datasets)
data("weather_df")
```

## Scatterplots!!

```{r}
ggplot(weather_df, aes(x=tmin, y=tmax)) +
  geom_point()
```


New approach, same plot

```{r}
weather_df %>%
  ggplot(aes(x=tmin, y=tmax)) +
  geom_point()
```

Save and edit a plot object.

```{r}
weather_plot=
  weather_df %>%
  ggplot(aes(x=tmin, y=tmax))

weather_plot + geom_point()
```


## Advanced scatterplot

Start with the same one and make it fancy!

```{r}
weather_df %>%
  ggplot(aes(x=tmin, y=tmax, color=name)) +
  geom_point()+
  geom_smooth(se=FALSE)
```
（aes 在 ggplot() 中全局映射，color=name 成为全局设置，所有图层（点和拟合线）都按 name 分组着色，会为每个 name 分别绘制一条对应颜色的拟合线）





What about the `aes` placement?

```{r}
weather_df %>%
  ggplot(aes(x=tmin, y=tmax)) +
  geom_point(aes(color=name)) +
  geom_smooth()
```
（aes 在 geom_point() 中局部映射，color=name 只作用于点图层，只有散点按 name 分组着色，所有数据点一起拟合，只生成一条总的拟合线）





Let's facet some things!

(facet_grid(行变量~列变量)，如果没有变量用‘.’代替)

```{r}
weather_df %>%
  ggplot(aes(x=tmin, y=tmax, color=name)) +
  geom_point(alpha=.2)+
  geom_smooth(se=FALSE, size=1.5) +
  facet_grid(.~ name)
```
(alpha 参数控制透明度, 取值范围：0（完全透明）到 1（完全不透明）)

Or write like this:

```{r}
weather_df %>%
  ggplot(aes(x=tmin, y=tmax, alpha=tmin, color=name)) +
  geom_point()+
  geom_smooth(se=FALSE, size=1.5) +
  facet_grid(.~ name)
```




```{r}
weather_df %>%
  ggplot(aes(x=tmin, y=tmax, color=name)) +
  geom_point()+
  geom_smooth(se=FALSE) +
  facet_grid(name~.)
```



Let's combine some elements and try a new plot.

```{r}
weather_df %>%
  ggplot(aes(x=date, y=tmax, color=name)) +
  geom_point(aes(size = prcp),alpha=.5)+
  geom_smooth(se=FALSE)+
  facet_grid(.~ name)
```



## Some small notes

How many geoms have to exist?
You can have whatever geoms you want.

```{r}
weather_df %>%
  ggplot(aes(x=tmin, y=tmax, color=name))+
  geom_smooth(se=FALSE)
```

You can use a neat geom!

```{r}
weather_df %>%
  ggplot(aes(x=tmin, y=tmax))+
  geom_hex()
```

```{r}
weather_df %>%
  ggplot(aes(x=tmin, y=tmax))+
  geom_bin_2d()
```

```{r}
weather_df %>%
  ggplot(aes(x=tmin, y=tmax))+
  geom_density_2d()+
  geom_point()
```


